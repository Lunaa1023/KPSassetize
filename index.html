<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Serial & Asset Sorter</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      margin: 1.5rem;
      background: #111;
      color: #eee;
    }
    h1 {
      text-align: center;
      margin-bottom: 0.2rem;
      color: #ff2e2e;
    }
    .container { max-width: 900px; margin: 0 auto; }
    textarea {
      width: 100%;
      min-height: 140px;
      font-family: monospace;
      padding: 0.6rem;
      border-radius: 6px;
      border: 1px solid #444;
      box-sizing: border-box;
      background: #1a1a1a;
      color: #eee;
    }
    .controls {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: wrap;
      margin: 0.6rem 0;
    }
    button {
      padding: 0.5rem 0.9rem;
      border-radius: 6px;
      border: none;
      background: #ff2e2e;
      color: white;
      cursor: pointer;
      font-weight: bold;
      transition: 0.2s;
    }
    button:hover {
      background: #cc0000;
    }
    button.secondary {
      background: #333;
      color: #eee;
    }
    button.secondary:hover {
      background: #555;
    }
    .output {
      display: flex;
      gap: 1rem;
      margin-top: 0.8rem;
      flex-wrap: wrap;
    }
    .box { flex: 1 1 45%; min-width: 260px; }
    .box h2 {
      margin: 0 0 0.4rem 0;
      font-size: 1.05rem;
      color: #ff2e2e;
    }
    label {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      cursor: pointer;
    }
    .meta { margin-top: 0.5rem; color: #aaa; font-size: 0.95rem; }
    .actions { display: flex; gap: 0.5rem; margin-top: 0.4rem; }
    .note { margin-top: 0.8rem; font-size: 0.92rem; color: #aaa; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Serial & Asset Sorter</h1>
    <p class="note">Paste your mixed list (one item per line). This tool runs entirely in your browser â€” no files uploaded.</p>

    <div class="controls">
      <label><input type="checkbox" id="stripS"> Remove leading "s" (with optional separator) from serial numbers</label>
      <button onclick="sortList()">Sort</button>
      <button class="secondary" onclick="clearAll()">Clear</button>
      <div style="margin-left:auto" id="counts">0 serial(s), 0 asset(s), 0 unknown</div>
    </div>

    <textarea id="input" placeholder="Examples:
S12345
S-12345
123456   (asset)
ASSET-001 (will go to Unknown)"></textarea>

    <div class="output">
      <div class="box">
        <h2>Serial Numbers</h2>
        <textarea id="serials" readonly></textarea>
        <div class="actions">
          <button onclick="copyText('serials')">Copy Serials</button>
        </div>
      </div>

      <div class="box">
        <h2>Asset Numbers</h2>
        <textarea id="assets" readonly></textarea>
        <div class="actions">
          <button onclick="copyText('assets')">Copy Assets</button>
        </div>
      </div>

      <div class="box">
        <h2>Unknown / Other</h2>
        <textarea id="unknown" readonly></textarea>
        <div class="actions">
          <button onclick="copyText('unknown')">Copy Unknown</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function sanitizeLine(str) {
      return str.replace(/\uFEFF/g, '').replace(/\u00A0/g, ' ').trim();
    }

    function sortList() {
      const inputText = document.getElementById("input").value;
      const stripS = document.getElementById("stripS").checked;
      const lines = inputText.split(/\r?\n/);

      const serials = [];
      const assets = [];
      const unknown = [];

      // Pattern: starts with S, optional separators, then alphanumeric
      const serialPattern = /^s[\-\s_:]*([A-Za-z0-9]+)$/i;

      for (let raw of lines) {
        let line = sanitizeLine(raw);
        if (!line) continue;

        let m;
        if ((m = line.match(serialPattern)) !== null) {
          const core = m[1];
          serials.push(stripS ? core : line);
          continue;
        }

        if (/^\d+$/.test(line)) {
          assets.push(line);
          continue;
        }

        unknown.push(line);
      }

      document.getElementById("serials").value = serials.join("\n");
      document.getElementById("assets").value = assets.join("\n");
      document.getElementById("unknown").value = unknown.join("\n");

      document.getElementById("counts").textContent =
        `${serials.length} serial(s), ${assets.length} asset(s), ${unknown.length} unknown`;
    }

    function copyText(id) {
      const el = document.getElementById(id);
      el.select();
      navigator.clipboard?.writeText(el.value).then(
        ()=>alert('Copied to clipboard'),
        ()=>alert('Unable to copy')
      );
    }

    function clearAll() {
      document.getElementById("input").value = "";
      document.getElementById("serials").value = "";
      document.getElementById("assets").value = "";
      document.getElementById("unknown").value = "";
      document.getElementById("counts").textContent = "0 serial(s), 0 asset(s), 0 unknown";
    }
  </script>
</body>
</html>
